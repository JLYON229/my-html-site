<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Agent Journey - Super Portal</title>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&display=swap" rel="stylesheet"/>

 <style>
  body {
    font-family: 'Montserrat', sans-serif;
    background: linear-gradient(to right, #eef3fc, #ffffff);
    margin: 0;
    padding: 20px;
    min-height: 100vh;
  }
   
  .container {
    display: none; /* Hide until login is verified */
    max-width: 850px;
    margin: auto;
    background: white;
    padding: 40px;
    border-radius: 24px;
    box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
    animation: fadeIn 0.6s ease-in-out;
  }

  h1, h2, h3 {
    text-align: center;
    color: #112663;
    margin-bottom: 20px;
  }

  p {
    font-size: 18px;
    color: #333;
    line-height: 1.6;
    text-align: center;
  }

.left-align-text {
  text-align: left;
}

.button.full-width {
  width: 100%;
}

.left-align-text {
  text-align: left;
  font-size: 18px;
  font-weight: 500;
}


.left-align {
  text-align: left;
}

#step3 {
  text-align: left;
}

#step3 .whats-your-path {
  font-size: 19px;     /* 1px bigger */
  font-weight: 600;    /* Bold */
  margin-top: 20px;    /* Optional: adds space above for clarity */
}

#step3 .left-text {
  text-align: left;
}


  .button {
    background-color: #112663;
    color: white;
    padding: 15px 20px;
    font-size: 16px;
    font-weight: 600;
    border: none;
    border-radius: 10px;
    cursor: pointer;
    transition: background-color 0.3s ease, transform 0.2s ease;
    width: 100%;
    text-align: center;
    display: flex;
    justify-content: center;
    align-items: center;
  }

  .button:hover {
    background-color: #44B2E5;
    transform: scale(1.03);
  }

.button-grid {
  display: flex;
  flex-direction: column;
  align-items: flex-start; /* ğŸ‘ˆ align left */
  gap: 15px;
  margin-top: 25px;
}


  .button-grid.grid-2 {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 15px;
  }

  .button-grid.grid-3 {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 15px;
  }

  .step {
    display: none;
    margin-top: 30px;
    opacity: 0;
    transform: translateY(10px);
    transition: opacity 0.4s ease, transform 0.4s ease;
  }

  .step.visible {
    display: block;
    opacity: 1;
    transform: translateY(0);
  }

  ul {
    list-style: none;
    padding-left: 0;
    font-size: 16px;
    color: #333;
  }

  li {
    margin-bottom: 12px;
  }

  label input[type="checkbox"] {
    margin-right: 8px;
  }

  /* Back Button */
  .back-button {
    display: flex;
    justify-content: center;
    align-items: center;
    background-color: #112663;
    color: white;
    border: none;
    padding: 15px 20px;
    font-size: 16px;
    font-weight: 500;
    border-radius: 10px;
    cursor: pointer;
    margin-top: 30px;
    width: 100%;
    text-align: center;
  }

  .back-button:hover {
    background-color: #44B2E5;
  }

.progress-container {
  width: 100%;
  background-color: #44B2E5; /* Unfilled background */
  height: 10px;
  border-radius: 6px;
  margin-bottom: 20px;
  overflow: hidden;
}

.progress-bar {
  height: 100%;
  width: 0%;
  background-color: #112663; /* Filled color */
  transition: width 0.4s ease-in-out;
}


  @keyframes fadeIn {
    from { opacity: 0; transform: translateY(20px); }
    to { opacity: 1; transform: translateY(0); }
  }
</style>

  <!-- Firebase SDK -->
<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
  import { getAuth, sendSignInLinkToEmail, isSignInWithEmailLink, signInWithEmailLink } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";

  const firebaseConfig = {
    apiKey: "AIzaSyDBnicB2JPFZRFtd88CmKOCkG6sJzLpBrU",
    authDomain: "agent-journey-interactive-flow.firebaseapp.com",
    projectId: "agent-journey-interactive-flow",
    appId: "1:454017962013:web:a363c04ad64af19176b6f4"
  };

  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);

  const loginSection = document.getElementById("loginSection");
  const container = document.querySelector(".container");

  const sendOTP = async () => {
    const emailInput = document.getElementById("email");
    const errorMsg = document.getElementById("errorMsg");
    const email = emailInput.value;

    if (!email || !email.endsWith("@usclarity.com")) {
      errorMsg.textContent = "Please enter a valid @usclarity.com email.";
      return;
    }

    try {
      await sendSignInLinkToEmail(auth, email, {
        url: window.location.href,
        handleCodeInApp: true
      });
      window.localStorage.setItem("emailForSignIn", email);
      alert("ğŸ“© OTP link sent! Check your inbox.");
    } catch (error) {
      errorMsg.textContent = error.message;
    }
  };

  window.sendSignInLink = sendOTP;

  window.addEventListener("DOMContentLoaded", async () => {
    if (isSignInWithEmailLink(auth, window.location.href)) {
      let email = localStorage.getItem("emailForSignIn");
      if (!email) {
        email = prompt("Please confirm your email:");
      }
      try {
        await signInWithEmailLink(auth, email, window.location.href);
        localStorage.removeItem("emailForSignIn");
        loginSection.style.display = "none";
        container.style.display = "block";
        alert("âœ… Signed in successfully!");
      } catch (error) {
        document.getElementById("errorMsg").textContent = error.message;
      }
    } else {
      container.style.display = "none";
    }
  });
</script>


</head>
<body>

<!-- OTP -->
<div id="loginSection" style="max-width: 400px; margin: auto; padding: 20px;">
  <h2>ğŸ” Sign In</h2>
  <input type="email" id="email" placeholder="Enter your @usclarity.com email" style="width: 100%; padding: 10px;" />
  <button class="button" onclick="sendSignInLink()">Send OTP Link</button>
  <p id="errorMsg" style="color: red;"></p>
</div>

  
  <div class="progress-container">
    <div class="progress-bar" id="progressBar"></div>
  </div>
  <div class="container">







    <!-- Step 1: Homepage Department Selection -->
    <div id="step1" class="step visible">
      <h1>Welcome Agent! ğŸŒŸ</h1>
      <p>This is your personalized Agent Journey Interactive Flow.<br><br>
      Please start by selecting your department:</p>

      <div class="button-grid grid-3">
        <button class="button" onclick="selectDepartment('Ancillary Support')">Ancillary Support</button>
        <button class="button" onclick="selectDepartment('Ancillary Underwriting')">Ancillary Underwriting</button>
        <button class="button" onclick="selectDepartment('Customer Service')">Customer Service</button>
        <button class="button" onclick="selectDepartment('Function Support')">Function Support</button>
        <button class="button" onclick="selectDepartment('Negotiations')">Negotiations</button>
        <button class="button" onclick="selectDepartment('Payments')">Payments</button>
        <button class="button" onclick="selectDepartment('Retention')">Retention</button>
        <button class="button" onclick="selectDepartment('Sales')">Sales</button>
        <button class="button" onclick="selectDepartment('Telemarketing')">Telemarketing</button>
      </div>
    </div>










    <!-- Step 2: Inbound/Outbound Selector -->
    <div id="step2" class="step">
      <h2 id="deptTitle"></h2>
      <p>Is the call Inbound or Outbound?</p>
      <div class="button-grid grid-2">
        <button class="button" onclick="selectCallType('Inbound')">ğŸ“¥ Inbound</button>
        <button class="button" onclick="selectCallType('Outbound')">ğŸ“¤ Outbound</button>
      </div>
      <button class="back-button" onclick="goBack()">ğŸ”™ Back</button>
    </div>










    <!-- Step 3: Customer Service â€“ Inbound Paths -->
<div id="step3" class="step left-align">
      <h2>Customer Service â€“ Inbound Paths</h2>

      <!-- Inbound Authentication -->
<h3 class="left-text"><strong>Client Authentication</strong> and Verification</h3>
      <div class="button-grid grid-1">
        <label><input type="checkbox"> Verify Full Name</label>
        <label><input type="checkbox"> Verify Date of Birth</label>
        <label><input type="checkbox"> Verify Full Address</label>
        
      </div>
<p class="left-text" style="color: red; font-style: italic;">
  At least two of these details must be verified before proceeding.
</p>
<p class="left-text" style="font-style: italic;">
  Ask the client: <strong>â€œHave any of your contact details changed since our last conversation?â€</strong>
</p>
        
      <div class="button-grid grid-1">

        <label><input type="checkbox"> Verify Email Address</label>
        <label><input type="checkbox"> Verify Additional Phone Numbers</label>

      </div>
 <p class="whats-your-path">What's your path?</p>


      <!-- Inbound Action Buttons -->
      <div class="button-grid grid-3">
        <button class="button" onclick="showStep('addDebt')">â• Add a Debt</button>
        <button class="button" onclick="showStep('cancelVerify')">âŒ Cancellation Request</button>
        <button class="button" onclick="showStep('clientPassing')">ğŸ•Šï¸ Clientâ€™s Passing</button>
        <button class="button" onclick="showStep('draftChange')">âœï¸ Draft Change</button>
        <button class="button" onclick="showStep('draftDecrease')">ğŸ“‰ Draft Decrease</button>
        <button class="button" onclick="showStep('draftIncrease')">ğŸ’° Draft Increase</button>
        <button class="button" onclick="showStep('legalInquiries')">ğŸ“˜ Legal Inquiries</button>
        <button class="button" onclick="showStep('legalSummons')">ğŸ›ï¸ Legal Summons</button>
        <button class="button" onclick="showStep('lending')">ğŸ’¼ Lending Eligibility</button>
        <button class="button" onclick="showStep('payoffRequest')">ğŸ’³ Payoff Request</button>
        <button class="button" onclick="showStep('preLegal')">âš ï¸ Pre-Legal Notice</button>
        <button class="button" onclick="showStep('programExtension')">ğŸ“… Program Extension</button>
        <button class="button" onclick="showStep('programGraduation')">ğŸ“ Program Graduation</button>
        <button class="button" onclick="showStep('refundRequest')">ğŸ’¸ Refund Request</button>
        <button class="button" onclick="showStep('removeDebt')">â– Remove a Debt</button>
        <button class="button" onclick="showStep('settlementAuthIB')">ğŸ—‚ï¸ Settlement Authorization IB</button>
        <button class="button" onclick="showStep('updateBank')">ğŸ¦ Update Bank Info</button>
      </div>

      <button class="back-button" onclick="goBack()">ğŸ”™ Back</button>
    </div>










<!-- Add a Debt -->
<div id="addDebt" class="step">
  <h2>â• Add a Debt</h2>
  <p>Select the type of debt:</p>
  <div class="button-grid grid-2">
    <button class="button" onclick="showChecklist('loan')">Loan</button>
    <button class="button" onclick="showChecklist('credit')">Credit Card</button>
  </div>
  <button class="back-button" onclick="goBack()">ğŸ”™ Back</button>
</div>
<!-- Debt Checklist (dynamically loaded) -->
<div id="debtChecklist" class="step">
  <h2>Steps to Add a Debt</h2>
  <ul id="checklistText"></ul>
  <div class="button-grid">
    <button class="button" onclick="showStep('ach')">Transfer to ACH</button>
  </div>
  <button class="back-button" onclick="goBack()">ğŸ”™ Back</button>
</div>






<!-- Step 1: Verify Caller -->
<div id="cancelVerify" class="step">
  <h2>âŒ Cancellation Request â€“ Verify Caller</h2>
  <p>Is the person requesting the cancellation the client?</p>
  <div class="button-grid grid-2">
    <button class="button" onclick="showStep('cancelFileActions')">âœ… Yes, it's the client</button>
    <button class="button" onclick="showStep('cancelEnd')">âŒ No, authorized speaker</button>
  </div>
  <button class="back-button" onclick="goBack()">ğŸ”™ Back</button>
</div>
<!-- End Call -->
<div id="cancelEnd" class="step">
  <h2>End of Call</h2>
  <p>We cannot cancel the program without the clientâ€™s request.</p>
  <div class="button-grid">
    <button class="button" onclick="resetFlow()">ğŸ  Home Page </button>
  </div>
  <button class="back-button" onclick="goBack()">ğŸ”™ Back</button>
</div>
<!-- Step 2: File Actions -->
<div id="cancelFileActions" class="step">
  <h2>Step 2: File Actions</h2>
  <ul>
    <li><label><input type="checkbox"> Go to Enrollment tab â†’ Click on "Pause Payments"</label></li> <!--Pause payments in Enrollment tab.-->
    <li><label><input type="checkbox"> Add note â†’ Use â€œCancel Requestâ€ template.</label></li>  <!-- Create a note using â€œCancel Requestâ€ template. -->
    <li><label><input type="checkbox"> Update FORTH status to â€œCancellation Requested.â€</label></li>
  </ul>
  <div class="button-grid">
    <button class="button" onclick="showStep('cancelSpecialCases')">â¡ï¸ Next</button>
  </div>
  <button class="back-button" onclick="goBack()">ğŸ”™ Back</button>
</div>
<!-- Step 3: Case Transfers -->
<div id="cancelSpecialCases" class="step">
  <h2>Step 3: Case Transfers</h2>
    <p class="left-align-text"> If the file belongs to one of the providers below, follow specific transfer instructions: </p>

  <ul style="list-style: none; padding-left: 0; margin-top: 15px;">
    <li><strong style="color:red;">CREDIT CARE SOLUTION:</strong> Transfer to +1-949-787-6008 or +1-949-490-6316 and tag <code>retentions@clientcare.com</code> + sales rep.</li>
    <li><strong style="color:red;">LOAN RATE PAL:</strong> Transfer to +1-561-678-5408 and tag <code>jsamuels@loanratepal.com</code>, <code>processing@loanratepal.com</code> + sales rep.</li>
    <li><strong style="color:red;">BOTTOM LINE ACCESS:</strong> Transfer to +1-516-202-6237 and tag <code>info@saldardeudas.com</code> + sales rep.</li>
    <li><strong style="color:red;">MITIGATELY:</strong> Follow internal Retention Team process.</li>
  </ul>

  <p>If not in the list, transfer to the <strong>Retention Department</strong>.</p>

  <div class="button-grid">
    <button class="button" onclick="showStep('cancelTimeline')">â¡ï¸ Next</button>
  </div>
  <button class="back-button" onclick="goBack()">ğŸ”™ Back</button>
</div>
<!-- Step 4: Cancellation Timeline -->
<div id="cancelTimeline" class="step">
  <h2>Step 4: Cancellation Timeline</h2>
  <ul>
    <li>ğŸ“† 5â€“7 business days to complete cancellation.</li>
    <li>ğŸ’¸ Refund processed within 7â€“10 business days after cancellation.</li>
  </ul>
  <div class="button-grid">
    <button class="button" onclick="showStep('cancelEscalation')">â¡ï¸ Next</button>
  </div>
  <button class="back-button" onclick="goBack()">ğŸ”™ Back</button>
</div>
<!-- Step 5: Escalation -->
<div id="cancelEscalation" class="step">
  <h2>Step 5: Escalation Note</h2>
  <p style="background:#fff9e6; border-left: 4px solid #ffc107; padding: 15px;">
    â° <strong>If file is not cancelled within 7 business days, notify your lead immediately.</strong>
  </p>
  <div class="button-grid">
    <button class="button" onclick="resetFlow()">ğŸ  Home Page </button>
  </div>
  <button class="back-button" onclick="goBack()">ğŸ”™ Back</button>
</div>






<!-- Clientâ€™s Passing -->
<div id="clientPassing" class="step">
  <h2>ğŸ•Šï¸ Clientâ€™s Passing</h2>
  <p>If a client has passed away, handle with professionalism and compassion.</p>

  <p><strong>Important:</strong> If a relative calls, you do not need to authenticate them, but you cannot share account details.</p>

  <ul>
    <li><label><input type="checkbox"> Request a scanned copy of the death certificate and provide the appropriate upload email.</label></li>
    <li><label><input type="checkbox"> Upload the document to the clientâ€™s file.</label></li>
    <li><label><input type="checkbox"> Add note â†’ Use â€œDocument Uploadedâ€ template. </label></li>
    <li><label><input type="checkbox"> Go to Tasks â†’ Create a task assigned to the file's team color.</label></li>
    <li><label><input type="checkbox"> Go to Tasks â†’ Create a task type: â€œFollow Up: Death Certificate." for <strong>JR Negotiations</strong></label></li>
  </ul>

  <p style="background:#fff5f5; padding:10px; border-left: 4px solid red; font-style: italic;">
    If asked about the debt status: â€œIâ€™m not authorized to provide legal advice. Please consult with a local attorney.â€
  </p>

  <div class="button-grid">
    <button class="button" onclick="resetFlow()">ğŸ  Home Page </button>
  </div>
  <button class="back-button" onclick="goBack()">ğŸ”™ Back</button>
</div>






<!-- Draft Change -->
<div id="draftChange" class="step">
  <h2>âœï¸ Draft Change Request</h2>

  <p class="left-align-text">Clients may request changes including:</p>
  <ul class="left-align-text">
    <li>ğŸ“… Modifying the draft date</li>
    <li>â­ï¸ Skipping a draft</li>
    <li>â— Splitting a draft</li>
  </ul>

  <p class="left-align-text">
    <strong>Note:</strong> Requests must be made at least 2â€“3 business days in advance. Client must say â€œYesâ€ to the disclosure.
  </p>

  <div class="button-grid">
    <button class="button full-width" onclick="showStep('settlementStatus')">
      Continue to Settlement Status
    </button>
  </div>

  <button class="back-button" onclick="goBack()">ğŸ”™ Back</button>
</div>


<!-- Check Settlement Status -->
<div id="settlementStatus" class="step">
  <h2>Does the Client Have an Active Settlement?</h2>
  <div class="button-grid grid-2">
    <button class="button" onclick="showDisclosure('active')">âœ… Active Settlement</button>
    <button class="button" onclick="showDisclosure('none')">âŒ No Active Settlement</button>
  </div>
  <button class="back-button" onclick="goBack()">ğŸ”™ Back</button>
</div>

<!-- Draft Disclosure -->
<div id="draftDisclosure" class="step">
  <h2>Disclosure Script</h2>
  <p id="disclosureText"></p>
  <div class="button-grid grid-2">
    <button class="button" onclick="showStep('draftInstructions')">Client Agrees</button>
    <button class="button" onclick="showStep('endCall')">Client Declines</button>
  </div>
  <button class="back-button" onclick="goBack()">ğŸ”™ Back</button>
</div>

<!-- Instructions -->
<div id="draftInstructions" class="step">
  <h2>ğŸ“ Draft Change Instructions</h2>
  <ul>
    <li><label><input type="checkbox"> Apply the proper disclosure based on settlement status.</label></li>
    <li><label><input type="checkbox"> Add note â†’ Use â€œDraft Change Requestâ€ template.â€ template.</label></li>
    <li><label><input type="checkbox"> Ask if the request is One-Time or Permanent.</label></li>
  </ul>
  <div class="button-grid">
    <button class="button" onclick="showStep('draftArrangement')">Continue</button>
  </div>
  <button class="back-button" onclick="goBack()">ğŸ”™ Back</button>
</div>

<!-- Arrangement Type -->
<div id="draftArrangement" class="step">
  <h2>Arrangement Type</h2>
  <div class="button-grid grid-2">
    <button class="button" onclick="showStep('permanent')">ğŸ“… Permanent</button>
    <button class="button" onclick="showStep('onetime')">ğŸ• One-Time</button>
  </div>
  <button class="back-button" onclick="goBack()">ğŸ”™ Back</button>
</div>

<!-- Permanent Arrangement -->
<div id="permanent" class="step">
  <h2>Permanent Draft Arrangement</h2>
  <p>Example: â€œFrom [10th Mar / $400] to [20th Mar / $450] every month.â€</p>
  <ul>
    <li><label><input type="checkbox"> Confirm new amount and date with the client.</label></li>
    <li><label><input type="checkbox"> Submit details to ACH.</label></li>
  </ul>
  <div class="button-grid">
    <button class="button" onclick="showStep('ach')">Transfer to ACH</button>
  </div>
  <button class="back-button" onclick="goBack()">ğŸ”™ Back</button>
</div>

<!-- One-Time Arrangement -->
<div id="onetime" class="step">
  <h2>One-Time Draft Arrangement</h2>
  <p>Examples:</p>
  <pre>
Change: [25th Apr / $900] â†’ [29th Apr / $900]
Skip:   [25th Apr / $900] â†’ [EOP / $900]
Split:  [25th Apr / $900] â†’ [28th Apr / $500] & [EOP / $400]
  </pre>
  <ul>
    <li><label><input type="checkbox"> Document the change clearly in the file note.</label></li>
    <li><label><input type="checkbox"> Notify ACH team if ACH required.</label></li>
  </ul>
  <div class="button-grid">
    <button class="button" onclick="showStep('ach')">Transfer to ACH</button>
  </div>
  <button class="back-button" onclick="goBack()">ğŸ”™ Back</button>
</div>





<!-- Draft Decrease -->
<div id="draftDecrease" class="step">
  <h2>ğŸ“‰ Draft Decrease Request</h2>

  <p class="left-align-text">
    Clients may request to lower their drafts due to hardship or personal changes.
  </p>

  <ul>
    <li><label><input type="checkbox"> Check if client has any active settlements.</label></li>
    <li><label><input type="checkbox"> If so, read the required disclosure below.</label></li>
  </ul>

  <p style="background: #f9f9f9; padding: 15px; border-left: 4px solid #112663; font-style: italic;">
    â€œI can make this adjustment for you, but please note that by lowering your draft amount, there is a risk that the creditor could void the settlement.  
    If that happens, the payments made so far will go toward the original balance, and we may need to renegotiate.  
    The new terms may be less favorable. Would you still like to proceed?â€
  </p>

  <div class="button-grid grid-2">
    <button class="button" onclick="showStep('draftDecreaseConsent')">Client Wants to Proceed</button>
    <button class="button" onclick="showStep('endCall')">Client Declines</button>
  </div>

  <button class="back-button" onclick="goBack()">ğŸ”™ Back</button>
</div>

<!-- Draft Decrease Consent -->
<div id="draftDecreaseConsent" class="step">
  <h2>ğŸ“ Next Steps</h2>

  <ul>
    <li><label><input type="checkbox"> Create a task and tag the correct team.</label></li>
    <li><label><input type="checkbox"> Include the reason, the amount, and duration of decrease.</label></li>
    <li><label><input type="checkbox"> Inform client theyâ€™ll receive an email and may need to e-sign.</label></li>
  </ul>

  <p class="left-align-text">
    <strong>Note:</strong> If approved, client will be contacted for ACH. If no response, create a follow-up task.
  </p>

  <div class="button-grid">
    <button class="button" onclick="showStep('ach')">Transfer to ACH</button>
  </div>

  <button class="back-button" onclick="goBack()">ğŸ”™ Back</button>
</div>






<!-- Draft Increase -->
<div id="draftIncrease" class="step">
  <h2>ğŸ’° Draft Increase Request</h2>
  <p>Clients may request to increase their draft to:</p>
  <ul>
    <li>Expedite settlements</li>
    <li>Respond to legal notices</li>
    <li>Pay more toward their program</li>
  </ul>
  <p>This may be a permanent increase or a one-time boost.</p>
  <ul>
    <li><label><input type="checkbox"> Add note â†’ Use â€œDraft Increase Requestâ€ template.</label></li>
    <li><label><input type="checkbox"> Attempt to transfer to ACH.</label></li>
    <li><label><input type="checkbox"> If ACH fails/unavailable, create a task for ACH team lead.</label></li>
    <li><label><input type="checkbox"> Paste the increase request note into the task.</label></li>
  </ul>
  <div class="button-grid">
    <button class="button" onclick="showStep('ach')">Transfer to ACH</button>
  </div>
  <button class="back-button" onclick="goBack()">ğŸ”™ Back</button>
</div>






<!-- Legal Inquiries â€“ Approved Responses -->
<div id="legalInquiries" class="step">
  <h2>ğŸ“˜ Legal Inquiries â€“ Approved Responses</h2>
  <p class="left-align-text">Use these responses to remain compliant when clients ask legal questions:</p>
  <ul>
    <li>â“ <strong>â€œWill I go to jail?â€</strong><br>ğŸš« I can't give legal advice, but thatâ€™s not typical in these cases.</li>
    <li>â“ <strong>â€œCan they garnish my wages?â€</strong><br>ğŸš« Please speak with your creditor or consult a licensed attorney.</li>
    <li>â“ <strong>â€œDo I have to go to court?â€</strong><br>ğŸš« Some clients do attend hearings while we continue working on the account.</li>
    <li>â“ <strong>â€œShould I stop paying?â€</strong><br>ğŸš« Most clients find it helpful when payments are voluntarily past due.</li>
    <li>â“ <strong>â€œCan I block creditor calls?â€</strong><br>ğŸš« Many use RWC (Request for Written Communication) under FDCPA.</li>
    <li>â“ <strong>â€œWill you guarantee a settlement?â€</strong><br>ğŸš« We cannot promise one, but most legal accounts are resolved over time.</li>
  </ul>
  <div class="button-grid">
    <button class="button" onclick="resetFlow()">âœ”ï¸ Back to Start</button>
  </div>
  <button class="back-button" onclick="goBack()">ğŸ”™ Back</button>
</div>






<!-- Legal Summons Received -->
<div id="legalSummons" class="step">
  <h2>ğŸ›ï¸ Legal Summons Received</h2>
  <p class="left-align-text">Client has received an official court summons for an enrolled account.</p>
  <ul>
    <li><label><input type="checkbox"> Ask client to email or FAX a scanned copy (no photos).</label></li>
    <li><label><input type="checkbox"> Upload it to file as: <strong>Legal Document</strong>.</label></li>
    <li><label><input type="checkbox"> Add note â†’ Use â€œSummons â€“ Legal Document Receivedâ€ template.</label></li>
    <li><label><input type="checkbox"> Create task:</label></li>
<li></li>
      <ul>
        <li>Type: Follow-Up</li>
        <li>Due Date: [Date Received]</li>
        <li>Assigned To: CS Legal Support</li>
        <li>Paste note into task</li>
      </ul>
    </label></li>
  </ul>
  <div class="button-grid">
    <button class="button" onclick="showStep('legalProcedure')">â¡ï¸ Continue to Legal Procedure</button>
  </div>
  <button class="back-button" onclick="goBack()">ğŸ”™ Back</button>
</div>



<!-- Pre-Legal Notice -->
<div id="preLegal" class="step">
  <h2>âš ï¸ Pre-Legal Document Received</h2>
  <p>Client has received a Pre-Legal Turnover Letter or Legal Advertisement.</p>
  <ul>
    <li><label><input type="checkbox"> Ask the client to email a copy of the document.</label></li>
    <li><label><input type="checkbox"> Confirm it is a pre-legal notice and linked to an enrolled account.</label></li>
    <li><label><input type="checkbox"> Upload it as: <strong>Turnover Letter</strong>.</label></li>
    <li><label><input type="checkbox"> Add note â†’ Use â€œDocument Uploadedâ€ template.</label></li>
    <li><label><input type="checkbox"> Create a task for the fileâ€™s team color.</label></li>
    <li><label><input type="checkbox"> Create task</label></li>
    <li><label><input type="checkbox"> Type: Pre-Legal</label></li>
    <li><label><input type="checkbox"> Due Date: [Document Date]</label></li>
    <li><label><input type="checkbox"> Assigned To: Pre-Legal Team.</label></li>
    <li><label><input type="checkbox"> Note: â€œPlease assign a PLN.â€</label></li>
    </ul>
  <div class="button-grid">
    <button class="button" onclick="showStep('legalProcedure')">â¡ï¸ Continue to Legal Procedure</button>
  </div>
  <button class="back-button" onclick="goBack()">ğŸ”™ Back</button>
</div>



<!-- Legal Procedure -->
<div id="legalProcedure" class="step">
  <h2>ğŸ§¾ Legal Procedure</h2>

  <p class="left-align-text">
    Steps to prepare the file for legal negotiation:
  </p>

  <ul>
    <li><label><input type="checkbox"> Conduct a Budget Analysis (monthly income vs. expenses).</label></li>
    <li><label><input type="checkbox"> Update Hardship section under Additional Info.</label></li>
    <li><label><input type="checkbox"> Ask the client if they can provide additional funds to speed up settlement.</label></li>
  </ul>

  <p class="left-align-text"><strong>If client agrees to add funds:</strong></p>

  <ul>
    <li><label><input type="checkbox"> Add note â†’ Use â€œDraft Date Changeâ€ template.</label></li>
    <li><label><input type="checkbox"> Attempt to transfer to ACH. If unavailable, create task to ACH team.</label></li>
  </ul>

  <p class="left-align-text">
    <strong>If client cannot add funds:</strong><br>
    Let them know weâ€™ll still work on the file, but resolution may take longer.
  </p>

  <div class="button-grid">
    <button class="button" onclick="resetFlow()">ğŸ  Home Page </button>
  </div>

  <button class="back-button" onclick="goBack()">ğŸ”™ Back</button>
</div>






<!-- Lending Eligibility -->
<div id="lending" class="step">
  <h2>ğŸ’¼ Lending Eligibility</h2>

  <p class="left-align-text">
    This path determines if the client qualifies for a Debt Consolidation Loan (Fresh Loan Program).
  </p>

  <h3 class="left-align-text">Eligibility Criteria</h3>
  <ul>
    <li><label><input type="checkbox"> Client must have successfully cleared 6 drafts (no skipped or rescheduled drafts).</label></li>
    <li><label><input type="checkbox"> Client must have no Non-Sufficient Funds (NSF) charges.</label></li>
  </ul>

  <h3 class="left-align-text">If the Client Is Interested</h3>
  <ul>
    <li><label><input type="checkbox"> Open the clientâ€™s file and confirm eligibility.</label></li>
    <li><label><input type="checkbox"> Create a task titled â€œEligibility.â€</label></li>
    <li><label><input type="checkbox"> Assign the task to the Lending Operations Team.</label></li>
    <li><label><input type="checkbox"> Include all relevant details.</label></li>
  </ul>

  <div class="button-grid">
    <button class="button" onclick="resetFlow()">ğŸ  Home Page </button>
  </div>

  <button class="back-button" onclick="goBack()">ğŸ”™ Back</button>
</div>






<!-- Payoff Request -->
<div id="payoffRequest" class="step">
  <h2>ğŸ’³ Payoff Request</h2>
  <ul>
    <li><label><input type="checkbox"> Add note â†’ Use â€œPayoff Requestâ€ template.</label></li>
    <li><label><input type="checkbox"> Tag the note with â€œPayoff & Extension.â€</label></li>
    <li><label><input type="checkbox"> Inform client it takes 3â€“5 business days for a response.</label></li>
    <li><label><input type="checkbox"> Call back once a response is received or task is updated.</label></li>
  </ul>
  <div class="button-grid">
    <button class="button" onclick="showStep('final')">ğŸ  Home Page </button>
  </div>
  <button class="back-button" onclick="goBack()">ğŸ”™ Back</button>
</div>


















<!-- Remove a Debt -->
<div id="removeDebt" class="step">
  <h2>â– Remove a Debt</h2>
  <ul>
    <li><label><input type="checkbox"> Add note â†’ Use â€œRequest to Remove a Debtâ€ template.</label></li>
    <li><label><input type="checkbox"> Attempt to transfer to ACH for confirmation and task assignment.</label></li>
  </ul>
  <div class="button-grid">
    <button class="button" onclick="showStep('ach')">Transfer to ACH</button>
  </div>
  <button class="back-button" onclick="goBack()">ğŸ”™ Back</button>
</div>



<!-- Updating Bank Information -->
<div id="updateBank" class="step">
  <h2>ğŸ¦ Updating Bank Information</h2>

  <h3 class="left-align-text">ğŸ”„ Change Banking Details</h3>
  <ul>
    <li><label><input type="checkbox"> Go to the Bank Account tab in the clientâ€™s file.</label></li>
    <li><label><input type="checkbox"> Enter new Routing and Account Number.</label></li>
    <li><label><input type="checkbox"> Confirm Account Type (Checking or Savings).</label></li>
    <li><label><input type="checkbox"> Save changes in the system.</label></li>
  </ul>

  <h3 class="left-align-text">ğŸ“„ Generate & Send Document</h3>
  <ul>
    <li><label><input type="checkbox"> Go to Docs Section â†’ Generate Document.</label></li>
    <li>
      <span>Select the correct template:</span>
      <ul style="list-style: none; padding-left: 0; margin-top: 10px;">
        <li><label><input type="radio" name="bankTemplate"> <strong>FORTH:</strong> â€œForth Bank Change Requestâ€</label></li>
        <li><label><input type="radio" name="bankTemplate"> <strong>CFT:</strong> â€œCFT - Draft Modification Form (Payments Made) - UPDATEDâ€</label></li>
      </ul>
    </li>
    <li><label><input type="checkbox"> Send for electronic signature.</label></li>
    <li><label><input type="checkbox"> Add note â†’ Use â€œBank Changeâ€ template.</label></li>
  </ul>

  <h3 class="left-align-text">ğŸ“¥ Upload Confirmation</h3>
  <ul>
    <li><label><input type="checkbox"> Verify that â€œSigners Leftâ€ is zero in Clixign.</label></li>
    <li><label><input type="checkbox"> Download and upload signed document under â€œACH Authorization.â€</label></li>
  </ul>

  <div class="button-grid">
    <button class="button" onclick="resetFlow()">ğŸ  Home Page </button>
  </div>
  <button class="back-button" onclick="goBack()">ğŸ”™ Back</button>
</div>
















<!-- Refund Request -->
<div id="refundRequest" class="step">
  <h2>ğŸ’¸ Refund Request</h2>
  <p>Select the type of refund request:</p>
  <div class="button-grid grid-2">
    <button class="button" onclick="showStep('standardRefund')">Standard Refund</button>
    <button class="button" onclick="showStep('cancellationRefund')">Cancellation Refund</button>
  </div>
  <button class="back-button" onclick="goBack()">ğŸ”™ Back</button>
</div>



<!-- Standard Refund -->
<div id="standardRefund" class="step">
  <h2>ğŸ’µ Standard Refund Request</h2>
  <p>Client is requesting a refund from their trust account due to personal reasons.</p>
  <ul>
    <li><label><input type="checkbox"> Create task titled â€œRefund of Savings Requested.â€</label></li>
    <li><label><input type="checkbox"> Assign the task to the clientâ€™s team color.</label></li>
    <li><label><input type="checkbox"> If there are active settlements, explain active settlement disclosure.</label></li>
  </ul>
  <p><strong>Timeline:</strong> 7â€“10 business days for refund to reflect in bank account.</p>
  <div class="button-grid">
    <button class="button" onclick="showStep('final')">ğŸ  Home Page </button>
  </div>
  <button class="back-button" onclick="goBack()">ğŸ”™ Back</button>
</div>



<!-- Cancellation Refund -->
<div id="cancellationRefund" class="step">
  <h2>ğŸ“¤ Cancellation Refund Request</h2>
  <p class="left-align-text">Client has cancelled the program and is expecting a refund.</p>
  <ul>
    <li><label><input type="checkbox"> Allow 5â€“7 business days for cancellation to complete.</label></li>
    <li><label><input type="checkbox"> Refund is processed within 7â€“10 business days after cancellation.</label></li>
  </ul>
  <div class="button-grid">
    <button class="button" onclick="showStep('final')">ğŸ“ Transfer to Retention</button>
  </div>
  <button class="back-button" onclick="goBack()">ğŸ”™ Back</button>
</div>



<!-- Program Extension -->
<div id="programExtension" class="step">
  <h2>ğŸ“… Program Extension</h2>

  <h3 class="left-align-text">When Should You Review for Extension?</h3>
  <ul>
    <li><label><input type="checkbox"> File is ending soon but has unresolved enrolled debts.</label></li>
    <li><label><input type="checkbox"> There are unpaid settlements or incomplete negotiations.</label></li>
  </ul>

  <h3 class="left-align-text">Steps to Request a Program Extension:</h3>
  <ul>
    <li><label><input type="checkbox"> Add note â†’ Use â€œProgram Extension Review Requestedâ€ template.</label></li>
    <li><label><input type="checkbox"> Write: â€œKindly review the file to determine if an extension is necessary.â€ and tag â€œPayoff and Extension.â€</label></li>
  </ul>

  <div class="button-grid">
    <button class="button" onclick="resetFlow()">ğŸ  Home Page </button>
  </div>
  <button class="back-button" onclick="goBack()">ğŸ”™ Back</button>
</div>



<!-- Program Graduation -->
<div id="programGraduation" class="step">
  <h2>ğŸ“ Program Graduation</h2>
  <ul>
    <li><label><input type="checkbox"> Confirm all enrolled accounts are paid off.</label></li>
    <li><label><input type="checkbox"> Navigate to the file status section in FORTH.</label></li>
    <li><label><input type="checkbox"> Select â€œGraduation Reviewâ€ from the dropdown.</label></li>
    <li><label><input type="checkbox"> Click â€œUpdate Status.â€</label></li>
  </ul>
  <div class="button-grid">
    <button class="button" onclick="resetFlow()">ğŸ  Home Page </button>
  </div>
  <button class="back-button" onclick="goBack()">ğŸ”™ Back</button>
</div>






<!-- Settlement Authorization â€“ Inbound -->
<div id="settlementAuthIB" class="step">
  <h2>ğŸ—‚ï¸ Settlement Authorization â€“ Inbound</h2>
  <p class="left-align-text">The client has called back to confirm a settlement offer.</p>
  <ul>
    <li>
      <label><input type="checkbox"> <strong>Confirm reason for the call.</strong></label>
      <p class="left-align-text"><em>â€œThank you for returning our call. Weâ€™ve reached a settlement on your account ending in XXXX. Would you like to proceed?â€</em></p>
    </li>
    <li>
      <label><input type="checkbox"> <strong>Provide account balance and settlement amount.</strong></label>
      <p class="left-align-text"><em>â€œYour balance is [$Amount]. Weâ€™ve negotiated a settlement of [$Settlement Amount].â€</em></p>
    </li>
    <li>
      <label><input type="checkbox"> <strong>Ask for clear authorization.</strong></label>
      <p class="left-align-text"><em>â€œDo you authorize us to proceed with the settlement?â€</em></p>
    </li>
    <li>
      <label><input type="checkbox"> <strong>Add note â†’ Use â€œAUTH OBTAINEDâ€ template and tag:</strong></label>
      <p class="left-align-text"><em>Tag: Samantha Foster, David Martinez, and the negotiator who posted the offer.</em></p>
    </li>
    <li>
      <label><input type="checkbox"> <strong>Read settlement disclosure script.</strong></label>
      <p class="left-align-text"><em>â€œBy agreeing, you confirm that you understand the settlement terms. Once accepted, the account will reflect a resolved status upon full payment.â€</em></p>
    </li>
    <li>
      <label><input type="checkbox"> <strong>Post the note to the clientâ€™s file.</strong></label>
    </li>
  </ul>
  <div class="button-grid">
    <button class="button" onclick="resetFlow()">ğŸ  Home Page </button>
  </div>
  <button class="back-button" onclick="goBack()">ğŸ”™ Back</button>
</div>






















<!-- Customer Service â€“ Outbound Paths -->
<div id="csOutboundPaths" class="step">
  <h2>Customer Service â€“ Outbound</h2>

  <!-- Outbound Authentication -->
  <h3 class="left-align-text">Client Authentication and Verification</h3>

  <div class="button-grid grid-1">
    <label><input type="checkbox"> Verify Date of Birth</label>
    <label><input type="checkbox"> Verify Full Address</label>
  </div>

  <p class="left-align-text" style="color: red; font-style: italic;">
    Date of Birth and Address must be verified before proceeding.
  </p>

  <p class="left-align-text" style="font-style: italic;">
    Ask: <strong>â€œHave any of your contact details changed since our last conversation?â€</strong>
  </p>

  <div class="button-grid grid-1">
    <label><input type="checkbox"> Verify Email Address</label>
    <label><input type="checkbox"> Verify Additional Phone Numbers</label>
  </div>

  <p class="whats-your-path">What's your path?</p>


  <!-- Outbound Action Buttons -->
  <div class="button-grid grid-3">
    <button class="button" onclick="showStep('errorProcessing')">ğŸ›‘ Error Processing / Blocked</button>
    <button class="button" onclick="showStep('invalidBanking')">ğŸ¦ Invalid Banking</button>
    <button class="button" onclick="showStep('legalPlan')">âš–ï¸ Legal Plan</button>
    <button class="button" onclick="showStep('marReview')">ğŸ“Š Monthly Account Review (MAR)</button>
    <button class="button" onclick="showStep('nsfIssue')">ğŸ“¬ Non-Sufficient Funds (NSF)</button>
    <button class="button" onclick="showStep('poaSifRequest')">ğŸ“‚ POA / SIF Requests</button>
    <button class="button" onclick="showStep('settlementAuthOB')">ğŸ—‚ï¸ Settlement Authorization OB</button>
    <button class="button" onclick="showStep('stoppedPayment')">â›” Stopped Payment / Revoked</button>
  </div>

  <button class="back-button" onclick="goBack()">ğŸ”™ Back</button>
</div>





<!-- Monthly Account Review (MAR) -->
<div id="marReview" class="step">
  <h2>ğŸ“Š Monthly Account Review (MAR)</h2>

  <p class="left-align-text">
    This is where you'd provide guidance on what to review monthly, such as:
  </p>

  <ul>
    <li><label><input type="checkbox"> Review payment history for missed or rescheduled drafts.</label></li>
    <li><label><input type="checkbox"> Check for new creditor activity or balances added.</label></li>
    <li><label><input type="checkbox"> Ensure settlement negotiations are progressing.</label></li>
    <li><label><input type="checkbox"> Create internal task if action or follow-up is needed.</label></li>
  </ul>

  <div class="button-grid">
    <button class="button" onclick="resetFlow()">ğŸ  Home Page</button>
  </div>

  <button class="back-button" onclick="goBack()">ğŸ”™ Back</button>
</div>





<!-- Settlement Authorization â€“ Outbound -->
<div id="settlementAuthOB" class="step">
  <h2>ğŸ—‚ï¸ Settlement Authorization â€“ Outbound</h2>
  <p class="left-align-text">You are calling the client to request authorization for a new settlement offer.</p>
  <ul>
    <li>
      <label><input type="checkbox"> <strong>Explain the reason for your call.</strong></label>
      <p class="left-align-text"><em>â€œHi [Clientâ€™s Name], Iâ€™m calling to inform you that weâ€™ve reached a settlement on your account ending in XXXX.â€</em></p>
    </li>
    <li>
      <label><input type="checkbox"> <strong>Share settlement details.</strong></label>
      <p class="left-align-text"><em>â€œYour balance is [$Amount], and the settlement amount is [$Settlement Amount].â€</em></p>
    </li>
    <li>
      <label><input type="checkbox"> <strong>Ask for a clear â€œyes.â€</strong></label>
      <p class="left-align-text"><em>â€œDo you authorize us to proceed with this settlement?â€</em></p>
    </li>
    <li>
      <label><input type="checkbox"> <strong>Complete the â€œAUTH OBTAINEDâ€ note and tag:</strong></label>
      <p class="left-align-text"><em>Samantha Foster, David Martinez, and the negotiator who posted the settlement.</em></p>
    </li>
    <li>
      <label><input type="checkbox"> <strong>Read settlement disclosure to ensure compliance.</strong></label>
      <p class="left-align-text"><em>â€œBy saying yes, you acknowledge the settlement terms. The account will reflect as resolved once full payment is made.â€</em></p>
    </li>
    <li>
      <label><input type="checkbox"> <strong>Save the note and complete the file update.</strong></label>
    </li>
  </ul>
  <div class="button-grid">
    <button class="button" onclick="resetFlow()">ğŸ  Home Page </button>
  </div>
  <button class="back-button" onclick="goBack()">ğŸ”™ Back</button>
</div>



<!-- Legal Plan -->
<div id="legalPlan" class="step">
  <h2>âš–ï¸ Legal Plan Providers</h2>

  <h3 class="left-align-text">ğŸ§¾ Explaining the Plan</h3>
  <ul>
    <li><label><input type="checkbox"> Clarify this is optional for added protection.</label></li>
    <li><label><input type="checkbox"> Explain it includes a one-time enrollment + monthly subscription fee.</label></li>
    <li><label><input type="checkbox"> Emphasize it helps when legal action is taken by creditors.</label></li>
  </ul>

  <h3 class="left-align-text">ğŸ“¢ Communication & Expectations</h3>
  <ul>
    <li><label><input type="checkbox"> Never promise that a VLP attorney will call the client directly.</label></li>
    <li><label><input type="checkbox"> Inform client that attorney communication is not guaranteed.</label></li>
    <li><label><input type="checkbox"> Tell them all updates will come through our team.</label></li>
    <li><label><input type="checkbox"> Instruct them to contact us for legal case updates.</label></li>
  </ul>

  <div class="button-grid">
    <button class="button" onclick="resetFlow()">ğŸ  Home Page </button>
  </div>

  <button class="back-button" onclick="goBack()">ğŸ”™ Back</button>
</div>



<!-- NSF Path Selector -->
<div id="nsfIssue" class="step">
  <h2>ğŸ“¬ Non-Sufficient Funds (NSF) & Payment Issues</h2>
  <p>Select the appropriate situation:</p>
  <div class="button-grid grid-2">
    <button class="button" onclick="showStep('nsfSendUTC')">ğŸ“¨ Send UTC</button>
    <button class="button" onclick="showStep('nsfEscalation')">ğŸš« No Response from Client</button>
  </div>
  <button class="back-button" onclick="goBack()">ğŸ”™ Back</button>
</div>

<!-- Send UTC -->
<div id="nsfSendUTC" class="step">
  <h2>ğŸ“¨ Send UTC</h2>
  <ul>
    <li><label><input type="checkbox"> Create a task.</label></li>
    <li><label><input type="checkbox"> Select â€œReview Fileâ€ from CS section.</label></li>
    <li><label><input type="checkbox"> Assign to the appropriate team.</label></li>
    <li><label><input type="checkbox"> Select Help Desk as task destination.</label></li>
    <li><label><input type="checkbox"> Add note: â€œPlease send UTC to client, unable to contact client.â€</label></li>
  </ul>
  <div class="button-grid">
    <button class="button" onclick="resetFlow()">ğŸ  Home Page </button>
  </div>
  <button class="back-button" onclick="goBack()">ğŸ”™ Back</button>
</div>

<!-- NSF Escalation -->
<div id="nsfEscalation" class="step">
  <h2>ğŸš« Escalation â€“ No Response from Client</h2>
  <ul>
    <li><label><input type="checkbox"> Create internal request based on fileâ€™s team color.</label></li>
    <li><label><input type="checkbox"> Request review for potential force cancellation.</label></li>
    <li style="color: red; font-weight: bold;">
      âš ï¸ ALL FILES ARE ELIGIBLE FOR FORCE CANCELLATION REVIEW EXCEPT <span style="color: red;">CREDIT CARE</span>.
    </li>
  </ul>
  <p>âœ… Continue follow-up attempts after UTC is sent.</p>
  <div class="button-grid">
    <button class="button" onclick="resetFlow()">ğŸ  Home Page </button>
  </div>
  <button class="back-button" onclick="goBack()">ğŸ”™ Back</button>
</div>



<!-- Invalid Banking -->
<div id="invalidBanking" class="step">
  <h2>ğŸ¦ Invalid Banking</h2>
  <p>If the file status is â€œInvalid Banking,â€ verify whether the current information is accurate.</p>
  <div class="button-grid grid-2">
    <button class="button" onclick="showStep('bankCorrect')">âœ… Banking is Correct</button>
    <button class="button" onclick="showStep('updateBank')">âŒ Banking is Incorrect</button>
  </div>
  <button class="back-button" onclick="goBack()">ğŸ”™ Back</button>
</div>



<!-- Banking is Correct -->
<div id="bankCorrect" class="step">
  <h2>âœ… Banking is Correct</h2>

  <ul>
    <li>
      <label><input type="checkbox"> Send document to allow draft to proceed:</label>
      <ul style="list-style: none; padding-left: 0; margin-top: 10px;">
        <li>
          <label><input type="radio" name="bankCorrectTemplate"> 
            <strong>FORTH:</strong> Amended Authorization
          </label>
        </li>
        <li>
          <label><input type="radio" name="bankCorrectTemplate"> 
            <strong>CFT:</strong> Draft Modification Form (Payments Made â€“ Updated)
          </label>
        </li>
      </ul>
    </li>

    <li>
      <label><input type="checkbox"> Create internal request for processing team.</label>
    </li>
    <li>
      <label><input type="checkbox"> Transfer to Retention for missed draft rescheduling.</label>
    </li>
  </ul>

  <div class="button-grid">
    <button class="button" onclick="resetFlow()">ğŸ  Home Page </button>
  </div>

  <button class="back-button" onclick="goBack()">ğŸ”™ Back</button>
</div>



<!-- Stopped Payment / Revoked -->
<div id="stoppedPayment" class="step">
  <h2>â›” Stopped Payment / Revoked</h2>
  <p class="left-align-text">If the file shows â€œStopped Paymentâ€ or â€œReversed,â€ it means the client or their bank stopped the payment.</p>
  <ul>
    <li><label><input type="checkbox"> Call the client and ask why the payment was stopped.</label></li>
    <li><label><input type="checkbox"> Create internal request for review.</label></li>
    <li><label><input type="checkbox"> Transfer the call to Retention to reschedule the missed draft.</label></li>
  </ul>
  <div class="button-grid">
    <button class="button" onclick="resetFlow()">ğŸ  Home Page </button>
  </div>
  <button class="back-button" onclick="goBack()">ğŸ”™ Back</button>
</div>



<!-- Error Processing / Blocked -->
<div id="errorProcessing" class="step">
  <h2>ğŸ›‘ Error Processing / Blocked</h2>

  <p class="left-align-text">
    If the file status is â€œError Processingâ€ or â€œBlocked,â€ it usually means an issue with the draft transaction or system hold.
  </p>

  <ul>
    <li><label><input type="checkbox"> Contact your team lead to investigate the cause of the error.</label></li>
    <li><label><input type="checkbox"> Create an internal request with detailed notes.</label></li>
    <li><label><input type="checkbox"> Transfer the call to Retention to help reschedule or reroute the draft.</label></li>
  </ul>

  <div class="button-grid">
    <button class="button" onclick="resetFlow()">ğŸ  Home Page </button>
  </div>

  <button class="back-button" onclick="goBack()">ğŸ”™ Back</button>
</div>



<!-- POA / SIF Request Selector -->
<div id="poaSifRequest" class="step">
  <h2>ğŸ“‚ POA / SIF Requests</h2>
  <p>Select the type of request to submit:</p>
  <div class="button-grid grid-2">
    <button class="button" onclick="showStep('poaRequest')">ğŸ“ POA Request</button>
    <button class="button" onclick="showStep('sifRequest')">ğŸ“„ SIF Request</button>
  </div>
  <button class="back-button" onclick="goBack()">ğŸ”™ Back</button>
</div>



<!-- POA Request -->
<div id="poaRequest" class="step">
  <h2>ğŸ“ Power of Attorney (POA) Request</h2>
  <p class="left-align-text">A POA allows us to act on behalf of a client when communicating with their creditors.</p>
  <ul>
    <li><label><input type="checkbox"> Navigate to the <strong>Tasks</strong> tab.</label></li>
    <li><label><input type="checkbox"> Click <strong>Create Task</strong>.</label></li>
    <li><label><input type="checkbox"> Choose <strong>POA Request</strong> from Task Type dropdown.</label></li>
    <li><label><input type="checkbox"> Assign the task to the <strong>POA Team</strong>.</label></li>
    <li><label><input type="checkbox"> In the note, list specific account(s) for the POA.</label></li>
  </ul>
  <div class="button-grid">
    <button class="button" onclick="resetFlow()">ğŸ  Home Page </button>
  </div>
  <button class="back-button" onclick="goBack()">ğŸ”™ Back</button>
</div>



<!-- SIF Request -->
<div id="sifRequest" class="step">
  <h2>ğŸ“„ Settlement in Full (SIF) Request</h2>
  <p class="left-align-text">A SIF letter confirms a debt was resolved and no further collections will occur.</p>
  <ul>
    <li><label><input type="checkbox"> Navigate to the <strong>Tasks</strong> tab.</label></li>
    <li><label><input type="checkbox"> Click <strong>Create Task</strong>.</label></li>
    <li><label><input type="checkbox"> Choose <strong>SIF Request</strong> from Task Type dropdown.</label></li>
    <li><label><input type="checkbox"> Assign the task to the <strong>SIF Team</strong>.</label></li>
    <li><label><input type="checkbox"> In the note, list which account(s) need SIF confirmation.</label></li>
  </ul>
  <div class="button-grid">
    <button class="button" onclick="resetFlow()">ğŸ  Home Page </button>
  </div>
  <button class="back-button" onclick="goBack()">ğŸ”™ Back</button>
</div>



<!-- ACH Step -->
<div id="ach" class="step">
  <h2>ğŸ’³ Was ACH Transfer Successful?</h2>
  <div class="button-grid grid-2">
    <button class="button" onclick="showFinal(true)">âœ… Yes</button>
    <button class="button" onclick="showFinal(false)">âŒ No</button>
  </div>
  <button class="back-button" onclick="goBack()">ğŸ”™ Back</button>
</div>



<!-- End Call Step -->
<div id="endCall" class="step">
  <h2>ğŸ“ End of Call</h2>
  <p>The client does not wish to proceed. Kindly thank them for their time and end the call.</p>
  <div class="button-grid">
    <button class="button" onclick="resetFlow()">ğŸ  Home Page </button>
  </div>
  <button class="back-button" onclick="goBack()">ğŸ”™ Back</button>
</div>



<!-- Final Confirmation -->
<div id="final" class="step">
  <h2>ğŸ‰ Process Complete</h2>
  <p id="finalMessage"></p>
  <div class="button-grid">
    <button class="button" onclick="resetFlow()">ğŸ  Home Page </button>
  </div>
  <button class="back-button" onclick="goBack()">ğŸ”™ Back</button>
</div>







<script>

  const actionCodeSettings = {
  url: "https://cdraji.netlify.app",  // Your site address
  handleCodeInApp: true
};

  
  let selectedDepartment = "";
  let selectedCallType = "";
  let stepHistory = [];

  // Hide all steps
  function hideAllSteps() {
    document.querySelectorAll('.step').forEach(el => el.classList.remove('visible'));
  }

  // Show a specific step
  function showStep(id) {
    hideAllSteps();
    const step = document.getElementById(id);
    if (step) {
      step.classList.add('visible');
      if (stepHistory[stepHistory.length - 1] !== id) {
          stepHistory.push(id);
         }      
      updateProgressBar(); // this now starts once agent manually moves

    }

    document.querySelectorAll('.back-button').forEach(btn => {
      btn.style.display = (id === "step1") ? "none" : "flex";
    });
  }

  // Go back to previous step
  function goBack() {
    if (stepHistory.length > 1) {
      stepHistory.pop();
      const prev = stepHistory[stepHistory.length - 1];
      hideAllSteps();
      document.getElementById(prev).classList.add('visible');
      updateProgressBar(); // âœ… New line

    }
  }

  // Reset everything
  function resetFlow() {
    selectedDepartment = "";
    selectedCallType = "";
    stepHistory = ["step1"];
    document.getElementById("finalMessage").innerText = "";
    showStep("step1");
    updateProgressBar(); // âœ… This line resets the bar visually to 0%

  }

function updateProgressBar() {
  const bar = document.getElementById("progressBar");
  const totalSteps = document.querySelectorAll('.step').length;
  const current = stepHistory.length;
  const percent = Math.min((current / totalSteps) * 100, 100);
  bar.style.width = percent + "%";
}


  // Department selection
  function selectDepartment(dept) {
    selectedDepartment = dept;
    document.getElementById("deptTitle").innerText = `Department: ${dept}`;
    showStep("step2");
  }

  // Call type selection
  function selectCallType(type) {
    selectedCallType = type;

    if (selectedDepartment === "Customer Service" && type === "Inbound") {
      showStep("step3");
    } else if (selectedDepartment === "Customer Service" && type === "Outbound") {
      showStep("csOutboundPaths");
    } else {
      alert("This path is not yet available for this department and call type.");
      resetFlow();
    }
  }

  // Final ACH resolution
  function showFinal(success) {
    const msg = success
      ? "Youâ€™ve successfully completed the process. ğŸ‰"
      : "ACH is unavailable. Please create a task and assign it to the ACH team lead.";
    document.getElementById("finalMessage").innerText = msg;
    showStep("final");
  }

  // Settlement Disclosure Script logic
  function showDisclosure(status) {
    const disclosure = document.getElementById("disclosureText");
    if (!disclosure) return;

    disclosure.innerText = (status === "active")
      ? "I can make this change for you, but I must inform you that your settlement payment may not clear on time, and the creditor could void the settlement. If this occurs, all payments made so far will be applied to the principal balance. We would then need to renegotiate, and the new settlement may be less favorable."
      : "I can make this change for you. However, please keep in mind that for us to secure and maintain settlements, we need to ensure consistent drafts.";

    showStep("draftDisclosure");
  }

  // Checklist generator (for Add a Debt)
  function showChecklist(type) {
    const list = document.getElementById("checklistText");
    if (!list) return;
    list.innerHTML = "";
    const items = [
      "Obtain documents from the client (Bank Statement and Proof of Payment)",
      "Upload documents to the file",
      "Add note â†’ Use â€œDocument Uploadedâ€ template",
      "Add note â†’ Use â€œRequest to Add Debtâ€ template",
      "Attempt to transfer funds to ACH"
    ];
    items.forEach(i => {
      const li = document.createElement("li");
      li.innerHTML = `<label><input type="checkbox" style="margin-right: 8px;"> ${i}</label>`;
      list.appendChild(li);
    });
    showStep("debtChecklist");
  }

document.addEventListener("DOMContentLoaded", () => {
  document.getElementById("progressBar").style.width = "0%";
});

  // Start journey at main step
window.onload = () => {
  stepHistory = ["step1"];
  hideAllSteps();
  document.getElementById("step1").classList.add("visible");
  document.getElementById("progressBar").style.width = "0%"; // force-start at zero
};


// Handle redirect after clicking email link
window.addEventListener('load', () => {
if (isSignInWithEmailLink(auth, window.location.href)) {
    let email = window.localStorage.getItem('emailForSignIn');
    if (!email) {
      email = window.prompt('Please confirm your email:');
    }

    firebase.auth().signInWithEmailLink(email, window.location.href)
      .then(() => {
        window.localStorage.removeItem('emailForSignIn');
        document.getElementById("loginSection").style.display = "none";
        document.querySelector(".container").style.display = "block";
        alert("âœ… Signed in successfully!");
      })
      .catch(error => {
        document.getElementById("errorMsg").textContent = error.message;
      });
  } else {
    document.querySelector(".container").style.display = "none";
  }
});


</script>
